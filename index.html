<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
<meta name="baidu-site-verification" content="pzKra37kyC">
<meta name="google-site-verification" content="Tpp8m_k5m4Tzi6cI_Yzh5M10Yb0Vh4iUa8WMJqGE3kg">
<meta name="msvalidate.01" content="6848BAEF6B569BCE80C501D1FA6868F6">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/M32x32.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/M16x16.jpeg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="Tpp8m_k5m4Tzi6cI_Yzh5M10Yb0Vh4iUa8WMJqGE3kg">
  <meta name="baidu-site-verification" content="pzKra37kyC">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css">
  <script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script>


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://monteyang.cn').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"right","width":300,"display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: true,
    lazyload: true,
    pangu: true,
    comments: {"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="❤MY">
<meta property="og:type" content="website">
<meta property="og:title" content="Monte&#39;s Blog">
<meta property="og:url" content="http://monteyang.cn/index.html">
<meta property="og:site_name" content="Monte&#39;s Blog">
<meta property="og:description" content="❤MY">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Monte Yang">
<meta property="article:tag" content="3D Deep learning">
<meta property="article:tag" content=" Monte Yang">
<meta property="article:tag" content=" 深度学习">
<meta property="article:tag" content=" 算法">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://monteyang.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Monte's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Monte's Blog" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Monte's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">朝着咸鱼的反方向努力</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tools">

    <a href="/tools/" rel="section"><i class="fa fa-fw fa-wrench"></i>工具</a>

  </li>
        <li class="menu-item menu-item-bookmarks">

    <a href="/bookmarks/" rel="section"><i class="fa fa-fw fa-bookmark"></i>书签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/MonteYang" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://monteyang.cn/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-8.%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-DQN.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/M.jpeg">
      <meta itemprop="name" content="Monte Yang">
      <meta itemprop="description" content="❤MY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monte's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-8.%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-DQN.html" class="post-title-link" itemprop="url">强化学习-8.深度强化学习-DQN</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-04-25 00:33:05 / 修改时间：00:33:07" itemprop="dateCreated datePublished" datetime="2020-04-25T00:33:05+08:00">2020-04-25</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">强化学习</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="深度强化学习简介"><a href="#深度强化学习简介" class="headerlink" title="深度强化学习简介"></a>深度强化学习简介</h1><p>简单说来，<code>深度学习 + 强化学习 = 深度强化学习</code>。即，使用深度神经网络作为强化学习中的函数近似器，近似强化学习中的值函数模型、策略函数模型。</p>
<h1 id="DQN"><a href="#DQN" class="headerlink" title="DQN"></a>DQN</h1><blockquote>
<p>DQN（Deep Q Network）算法源自论文《Human-level control through deep reinforcement learning》(Nature2015)</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-8.%E6%B7%B1%E5%BA%A6%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0-DQN.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://monteyang.cn/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E5%BA%93.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/M.jpeg">
      <meta itemprop="name" content="Monte Yang">
      <meta itemprop="description" content="❤MY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monte's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%EF%BC%88%E5%9B%9B%EF%BC%89%E5%BA%93.html" class="post-title-link" itemprop="url">编写高质量Python程序（四）库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-20 14:05:31" itemprop="dateCreated datePublished" datetime="2020-04-20T14:05:31+08:00">2020-04-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-21 11:02:56" itemprop="dateModified" datetime="2020-04-21T11:02:56+08:00">2020-04-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>本系列文章为《编写高质量代码——改善Python程序的91个建议》的精华汇总。</p>
<!-- > 首发于公众号【Python与算法之路】 -->
</blockquote>
<h2 id="按需选择-sort-或者-sorted"><a href="#按需选择-sort-或者-sorted" class="headerlink" title="按需选择 sort() 或者 sorted()"></a>按需选择 <code>sort()</code> 或者 <code>sorted()</code></h2><p>Python 中常用的排序函数有 <code>sort()</code> 和 <code>sorted()</code> </p>
<p>两者的函数形式分别如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sorted(iterable[, cmp[, key[, reverse]]])</span><br><span class="line">s.sort([cmp[, key[, reverse]]])</span><br></pre></td></tr></table></figure>
<p><code>sort()</code> 和 <code>sorted()</code> 有3个共同的参数：</p>
<ul>
<li><code>cmp</code> ：<strong>用户定义的任何比较函数</strong>，函数的参数为两个可比较的元素（来自 iterable 或者 list ），函数根据第一个参数与第二个参数的关系依次返回 -1、0 或者 +1（第一个参数小于第二个参数则返回负数）。该参数默认值为 <code>None</code>。</li>
<li><code>key</code> 是一个带参数的函数，<strong>用来为每个元素提取比较值</strong>，默认为 <code>None</code>（即直接比较每个元素）</li>
<li><code>reverse</code> 表示排序<strong>结果是否反转</strong></li>
</ul>
<p>两者对比：</p>
<ul>
<li><p><code>sorted()</code> 作用于<strong>任何可迭代的对象</strong>；而 <code>sort()</code> 一般作用于<strong>列表</strong>。</p>
</li>
<li><p><code>sorted()</code> 函数会<strong>返回一个排序后的列表，原有列表保持不变</strong>；而 <code>sort()</code> 函数会<strong>直接修改原有列表</strong>，函数返回为 <code>None</code>。实际应用过程中需要保留原有列表，使用 <code>sorted()</code> 函数较为合适，否则可以选择 <code>sort()</code> 函数，因为 <code>sort()</code> 函数不需要复制原有列表，消耗的内存较少，效率也较高。</p>
</li>
<li>无论是 <code>sort()</code> 还是 <code>sorted()</code> 函数，传入参数 <code>key</code> 比传入参数 <code>cmp</code> 效率要高。<code>cmp</code> 传入的函数在整个排序过程中会调用多次，函数开销较大；而 <code>key</code> 针对每个元素仅做一次处理，因此使用 key 比使用 <code>cmp</code> 效率要高。</li>
<li><code>sorted()</code> 功能非常强大，它可以<strong>对不同的数据结构进行排序</strong>，从而满足不同需求。</li>
</ul>
<p>例：</p>
<p><strong>对字典进行排序</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>phone_book = &#123;<span class="string">"Linda"</span>: <span class="string">"7750"</span>, <span class="string">"Bob"</span>: <span class="string">"9345"</span>, <span class="string">"Carol"</span>: <span class="string">"5834"</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted_pb = sorted(phone_book.items(), key=itemgetter(<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(sorted_pb)</span><br><span class="line">[(<span class="string">'Carol'</span>, <span class="string">'5834'</span>), (<span class="string">'Linda'</span>, <span class="string">'7750'</span>), (<span class="string">'Bob'</span>, <span class="string">'9345'</span>)]</span><br></pre></td></tr></table></figure>
<p><strong>多维 List 排序</strong>：实际情况下也会碰到需要对多个字段进行排序的情况，这在 DB 里面用 SQL 语句很容易做到，但使用多维列表联合 <code>sorted()</code> 函数也可以轻易达到</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> operator</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game_result = [[<span class="string">"Bob"</span>,<span class="number">95</span>,<span class="string">"A"</span>],[<span class="string">"Alan"</span>,<span class="number">86</span>,<span class="string">"C"</span>],[<span class="string">"Mandy"</span>,<span class="number">82.5</span>,<span class="string">"A"</span>],[<span class="string">"Rob"</span>,<span class="number">86</span>,<span class="string">"E"</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(game_result, key=operator.itemgetter(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line">[[<span class="string">'Mandy'</span>, <span class="number">82.5</span>, <span class="string">'A'</span>], [<span class="string">'Bob'</span>, <span class="number">95</span>, <span class="string">'A'</span>], [<span class="string">'Alan'</span>, <span class="number">86</span>, <span class="string">'C'</span>], [<span class="string">'Rob'</span>, <span class="number">86</span>, <span class="string">'E'</span>]]</span><br></pre></td></tr></table></figure>
<p><strong>字典中混合 List 排序</strong>：字典中的 key 或者值为列表，对列表中的某一个位置的元素排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_dict = &#123;<span class="string">"Li"</span>:[<span class="string">"M"</span>,<span class="number">7</span>],<span class="string">"Zhang"</span>:[<span class="string">"E"</span>,<span class="number">2</span>],<span class="string">"Wang"</span>:[<span class="string">"P"</span>,<span class="number">3</span>],<span class="string">"Du"</span>:[<span class="string">"C"</span>,<span class="number">2</span>],<span class="string">"Ma"</span>:[<span class="string">"C"</span>,<span class="number">9</span>],<span class="string">"Zhe"</span>:[<span class="string">"H"</span>,<span class="number">7</span>]&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> operator</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(my_dict.items(), key=<span class="keyword">lambda</span> item:operator.itemgetter(<span class="number">1</span>)(item[<span class="number">1</span>]))</span><br><span class="line">[(<span class="string">'Du'</span>, [<span class="string">'C'</span>, <span class="number">2</span>]), (<span class="string">'Zhang'</span>, [<span class="string">'E'</span>, <span class="number">2</span>]), (<span class="string">'Wang'</span>, [<span class="string">'P'</span>, <span class="number">3</span>]), (<span class="string">'Zhe'</span>, [<span class="string">'H'</span>, <span class="number">7</span>]), (<span class="string">'Li'</span>, [<span class="string">'M'</span>, <span class="number">7</span>]), (<span class="string">'Ma'</span>, [<span class="string">'C'</span>, <span class="number">9</span>])]</span><br></pre></td></tr></table></figure>
<p><strong>List 中混合字典排序</strong>：列表中的每一个元素为字典形式，针对字典的多个 key 值进行排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> operator</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>game_result = [&#123;<span class="string">"name"</span>:<span class="string">"Bob"</span>,<span class="string">"wins"</span>:<span class="number">10</span>,<span class="string">"losses"</span>:<span class="number">3</span>,<span class="string">"rating"</span>:<span class="number">75</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"David"</span>,<span class="string">"wins"</span>:<span class="number">3</span>,<span class="string">"losses"</span>:<span class="number">5</span>,<span class="string">"rating"</span>:<span class="number">57</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"Carol"</span>,<span class="string">"wins"</span>:<span class="number">4</span>,<span class="string">"losses"</span>:<span class="number">5</span>,<span class="string">"rating"</span>:<span class="number">57</span>&#125;,&#123;<span class="string">"name"</span>:<span class="string">"Patty"</span>,<span class="string">"wins"</span>:<span class="number">9</span>,<span class="string">"losses"</span>:<span class="number">3</span>,<span class="string">"rating"</span>:<span class="number">71.48</span>&#125;]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sorted(game_result, key=operator.itemgetter(<span class="string">"rating"</span>,<span class="string">"name"</span>))</span><br><span class="line">[&#123;<span class="string">'losses'</span>: <span class="number">5</span>, <span class="string">'name'</span>: <span class="string">'Carol'</span>, <span class="string">'rating'</span>: <span class="number">57</span>, <span class="string">'wins'</span>: <span class="number">4</span>&#125;, &#123;<span class="string">'losses'</span>: <span class="number">5</span>, <span class="string">'name'</span>: <span class="string">'David'</span>, <span class="string">'rating'</span>: <span class="number">57</span>, <span class="string">'wins'</span>: <span class="number">3</span>&#125;, &#123;<span class="string">'losses'</span>: <span class="number">3</span>, <span class="string">'name'</span>: <span class="string">'Patty'</span>, <span class="string">'rating'</span>: <span class="number">71.48</span>, <span class="string">'wins'</span>: <span class="number">9</span>&#125;, &#123;<span class="string">'losses'</span>: <span class="number">3</span>, <span class="string">'name'</span>: <span class="string">'Bob'</span>, <span class="string">'rating'</span>: <span class="number">75</span>, <span class="string">'wins'</span>: <span class="number">10</span>&#125;]</span><br></pre></td></tr></table></figure>
<h2 id="使用-copy-模块深拷贝对象"><a href="#使用-copy-模块深拷贝对象" class="headerlink" title="使用 copy 模块深拷贝对象"></a>使用 copy 模块深拷贝对象</h2><ul>
<li><strong>浅拷贝（shallow copy）</strong>：构造一个新的复合对象，并将从原对象中发现的引用插入该对象中。浅拷贝的实现方式有多种，如工厂函数、切片操作、copy 模块中的 <code>copy</code> 操作等。</li>
<li><strong>深拷贝（deep copy）</strong>：也构造一个新的复合对象，但是遇到引用会继续递归拷贝其所指向的具体内容，也就是说它会针对引用所指向的对象继续执行拷贝，因此产生的对象不受其他引用对象操作的影响。深拷贝的实现需要依赖 copy 模块的 <code>deepcopy()</code> 操作。</li>
</ul>
<p><strong>浅拷贝并不能进行彻底的拷贝，当存在列表、字典等不可变对象的时候，它仅仅拷贝其引用地址</strong>。要解决上述问题需要用到深拷贝，深拷贝不仅拷贝引用也拷贝引用所指向的对象，因此<strong>深拷贝得到的对象和原对象是相互独立的。</strong></p>
<h2 id="使用-Counter-进行计数统计"><a href="#使用-Counter-进行计数统计" class="headerlink" title="使用 Counter 进行计数统计"></a>使用 Counter 进行计数统计</h2><p>计数统计就是统计某一项出现的次数。可以使用不同数据结构来进行实现：</p>
<ul>
<li>例如，使用 <code>defaultdict</code>实现</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">some_data = [<span class="string">"a"</span>, <span class="string">"2"</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">"2"</span>, <span class="string">"b"</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="string">"a"</span>, <span class="number">5</span>, <span class="string">"d"</span>, <span class="string">"a"</span>, <span class="string">"z"</span>]</span><br><span class="line">count_frq = defaultdict(int)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> some_data:</span><br><span class="line">    count_frq[item] += <span class="number">1</span></span><br><span class="line">print(count_frq)</span><br><span class="line"><span class="comment"># defaultdict(&lt;class 'int'&gt;, &#123;'a': 3, '2': 2, 2: 1, 4: 2, 5: 2, 'b': 1, 7: 1, 'd': 1, 'z': 1&#125;)</span></span><br></pre></td></tr></table></figure>
<p>但<strong>更优雅，更 Pythonic 的解决方法是使用 <code>collections.Counter</code></strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">some_data = [<span class="string">"a"</span>, <span class="string">"2"</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="string">"2"</span>, <span class="string">"b"</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="string">"a"</span>, <span class="number">5</span>, <span class="string">"d"</span>, <span class="string">"z"</span>, <span class="string">"a"</span>]</span><br><span class="line">print(Counter(some_data))</span><br><span class="line"><span class="comment"># Counter(&#123;'a': 3, '2': 2, 4: 2, 5: 2, 2: 1, 'b': 1, 7: 1, 'd': 1, 'z': 1&#125;)</span></span><br></pre></td></tr></table></figure>
<h2 id="深入掌握-ConfigParser"><a href="#深入掌握-ConfigParser" class="headerlink" title="深入掌握 ConfigParser"></a>深入掌握 ConfigParser</h2><p>常见的配置文件格式有 XML 和 ini 等，其中在 MS Windows 系统上，ini 文件格式用得尤其多，甚至操作系统的 API 也都提供了相关的接口函数来支持它。类似 ini 的文件格式，在 Linux 等操作系统中也是极常用的，比如 pylint 的配置文件就是这个格式。Python 有个标准库来支持它，也就是 ConfigParser。</p>
<p>ConfigParser 的基本用法通过<a href="http://doc.codingdict.com/python_352/library/configparser.html" target="_blank" rel="external nofollow noopener noreferrer">手册</a>可以掌握，但仍然有几个知识点值得注意。首先就是 <code>getboolean()</code> 这个函数。<code>getboolean()</code> 根据一定的规则将配置项的值转换为布尔值，如以下的配置：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[section1]</span></span><br><span class="line"><span class="attr">option1</span>=<span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<p>当调用 <code>getboolean(&quot;section1&quot;, &quot;option1&quot;)</code> 时，将返回 False。</p>
<p><strong><code>getboolean()</code> 的真值规则</strong>： 除了 0 以外，no、false 和 off 都会被转义为 False，而对应的 1、yes、true 和 on 则都被转义为 True，其他值都会导致抛出 <code>ValueError</code> 异常。</p>
<p>还需要注意的是配置项的查找规则。首先，在 ConfigParser 支持的配置文件格式里，有一个 <code>[DEFAULT]</code> 节，当读取的配置项不在指定的节里时，ConfigParser 将会到 <code>[DEFAULT]</code> 节中查找。<br>除此之外，还有一些机制导致项目对配置项的查找更复杂，这就是 class ConfigParser 构造函数中的 defaults 形参以及其 <code>get(section, option[, raw[, vars]])</code> 中的全名参数 <code>vars</code>。如果把这些机制全部用上，那么<strong>配置项值的查找规则</strong>：</p>
<ul>
<li>如果找不到节名，就抛出 NoSectionError</li>
<li>如果给定的配置项出现在 <code>get()</code> 方法的 <code>var</code> 参数中，则返回 <code>var</code> 参数中的值</li>
<li>如果在指定的节中含有给定的配置项，则返回其值</li>
<li>如果在 【DEFAULT】中有指定的配置项，则返回其值</li>
<li>如果在构造函数的 defaults 参数中有指定的配置项，则返回其值</li>
<li>抛出 NoOptionError</li>
</ul>
<h2 id="使用-argparse-处理命令行参数"><a href="#使用-argparse-处理命令行参数" class="headerlink" title="使用 argparse 处理命令行参数"></a>使用 argparse 处理命令行参数</h2><p>尽管应用程序通常能够通过配置文件在不修改代码的情况下改变行为，但提供灵活易用的命令行参数仍然非常有意义，比如：减轻用户的学习成本，通常命令行参数的用法只需要在应用程序名后面加 —help 参数就能获得，而配置文件的配置方法通常需要通读手册才能掌握。</p>
<p>关于命令行处理，现阶段<strong>最好用的</strong>参数处理标准库是 argparse。</p>
<ul>
<li><code>add_argument()</code> 方法用以增加一个参数声明。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">'Process some integers.'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'integers'</span>, metavar=<span class="string">'N'</span>, type=int, nargs=<span class="string">'+'</span>,</span><br><span class="line">                    help=<span class="string">'an integer for the accumulator'</span>)</span><br><span class="line">parser.add_argument(<span class="string">'--sum'</span>, dest=<span class="string">'accumulate'</span>, action=<span class="string">'store_const'</span>,</span><br><span class="line">                    const=sum, default=max,</span><br><span class="line">                    help=<span class="string">'sum the integers (default: find the max)'</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args.accumulate(args.integers))</span><br></pre></td></tr></table></figure>
<ul>
<li>除了支持常规的 int/float 等基本数值类型外，argparse 还<strong>支持文件类型</strong>，只要参数合法，程序就能够使用相应的文件描述符。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">"bar"</span>, type=argparse.FileType(<span class="string">"w"</span>))</span><br><span class="line">parser.parse_args([<span class="string">"out.txt"</span>])</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>扩展类型</strong>也变得更加容易，任何可调用对象，比如函数，都可以作为 type 的实参。另外 choices 参数也支持更多的类型，比如：   <code>parser.add_argument(&quot;door&quot;, type=int, choices=range(1, 4))</code>。</li>
<li>此外，add_argument() 提供了对<strong>必填参数</strong>的支持，只要把 required 参数设置为 True 传递进去，当缺失这一参数时，argparse 就会自动退出程序，并提示用户。</li>
<li>还支持<strong>参数分组</strong>。add_argument_group() 可以在输出帮助信息时更加清晰，这在用法复杂的 CLI 应用程序中非常有帮助：</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">parser = argparse.ArgumentParser(prog=<span class="string">"PROG"</span>, add_help=<span class="literal">False</span>)</span><br><span class="line">group1 = parser.add_argument_group(<span class="string">"group1"</span>, <span class="string">"group1 description"</span>)</span><br><span class="line">group1.add_argument(<span class="string">"foo"</span>, help=<span class="string">"foo help"</span>)</span><br><span class="line">group2 = parser.add_argument_group(<span class="string">"group2"</span>, <span class="string">"group2 description"</span>)</span><br><span class="line">group2.add_argument(<span class="string">"--bar"</span>, help=<span class="string">"bar help"</span>)</span><br><span class="line">parser.print_help()</span><br></pre></td></tr></table></figure>
<ul>
<li>另外还有 <code>add_mutually_exclusive_group(required=False)</code> 非常实用：它确保组中的<strong>参数至少有一个或者只有一个</strong>（required=True）。</li>
<li>argparse 也支持<strong>子命令</strong>，比如 <code>pip</code> 就有 <code>install/uninstall/freeze/list/show</code> 等子命令，这些子命令又接受不同的参数，使用 ArgumentParser.add_subparsers() 就可以实现类似的功能。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line">parser = argparse.ArgumentParser(prog=<span class="string">"PROG"</span>)</span><br><span class="line">subparsers = parser.add_subparsers(help=<span class="string">"sub-command help"</span>)</span><br><span class="line">parser_a = subparsers.add_parser(<span class="string">"a"</span>, help=<span class="string">"a help"</span>)</span><br><span class="line">parser_a.add_argument(<span class="string">"--bar"</span>, type=int, help=<span class="string">"bar help"</span>)</span><br><span class="line">parser.parse_args([<span class="string">"a"</span>, <span class="string">"--bar"</span>, <span class="string">"1"</span>])</span><br></pre></td></tr></table></figure>
<ul>
<li>除了参数处理之外，当出现<strong>非法参数</strong>时，用户还需要做一些处理，处理完成后，一般是输出提示信息并退出应用程序。ArgumentParser 提供了两个方法函数，分别是 <code>exit(status=0, message=None)</code> 和 <code>error(message)</code>，可以省了 <code>import sys</code> 再调用 <code>sys.exit()</code> 的步骤。</li>
</ul>
<h2 id="理解模块-pickle-优劣"><a href="#理解模块-pickle-优劣" class="headerlink" title="理解模块 pickle 优劣"></a>理解模块 pickle 优劣</h2><p>序列化，简单地说就是把内存中的数据结构在不丢失其身份和类型信息的情况下转换成对象的文本或二进制表示的过程。对象序列化后的形式经过反序列化过程应该能恢复原有对象。</p>
<p>Python 中有很多支持序列化的模块，如 pickle、json、marshal 和 shelve 等。</p>
<p><strong>pickle 是最通用的序列化模块</strong>，它还有个 C 语言的实现 cPickle，相比 pickle 来说具有较好的性能，其速度大概是 pickle 的 1000 倍，因此在大多数应用程序中应该优先使用 cPickle（注：cPickle 除了不能被继承之外，它们两者的使用基本上区别不大）。pickle 中最主要的两个函数对为 <code>dump()</code> 和 <code>load()</code>，分别用来进行对象的序列化和反序列化。</p>
<p>pickle 良好的特性总结为以下几点：</p>
<ul>
<li><strong>接口简单，容易使用</strong>。使用 <code>dump()</code> 和 <code>load()</code> 便可轻易实现序列化和反序列化。</li>
<li><strong>pickle 的存储格式具有通用性，能够被不同平台的 Python 解析器共享</strong>。比如 Linux 下序列化的格式文件可以在 Windows 平台的 Python 解析器上进行反序列化，兼容性较好。</li>
<li><strong>支持的数据类型广泛</strong>。如数字、布尔值、字符串，只包含可序列化对象的元组、字典、列表等，非嵌套的函数、类以及通过类的 <code>__dict__</code> 或者 <code>__getstate__()</code> 可以返回序列化对象的实例等。</li>
<li><p>pickle 模块是<strong>可以扩展</strong>的。对于实例对象，pickle 在还原对象的时候一般是不调用 <code>__init__()</code> 函数的，如果要调用 <code>__init__()</code> 进行初始化，对于古典类可以在类定义中提供 <code>__getinitargs__()</code> 函数，并返回一个元组，当进行 unpickle 的时候，Python 就会自动调用 <code>__init__()</code>，并把 <code>__getinitargs__()</code> 中返回的元组作为参数传递给 <code>__init__()</code>，而对于新式类，可以提供 <code>__getnewargs__()</code> 来提供对象生成时候的参数，在 unpickle 的时候以 <code>Class.__new__(Class, *arg)</code> 的方式创建对象。对于不可序列化的对象，如 sockets、文件句柄、数据库连接等，也可以通过实现 pickle 协议来解决这些巨献，主要是通过特殊方法 <code>__getstate__()</code> 和 <code>__setstate__()</code> 来返回实例在被 pickle 时的状态。</p>
<p>  示例：</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextReader</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, filename)</span>:</span></span><br><span class="line">        self.filename = filename    <span class="comment"># 文件名称</span></span><br><span class="line">        self.file = open(filename)    <span class="comment"># 打开文件的句柄</span></span><br><span class="line">        self.postion = self.file.tell()    <span class="comment"># 文件的位置</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">readline</span><span class="params">(self)</span>:</span></span><br><span class="line">        line = self.file.readline()</span><br><span class="line">        self.postion = self.file.tell()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> line.endswith(<span class="string">"\n"</span>):</span><br><span class="line">            line = line[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"&#123;&#125;: &#123;&#125;"</span>.format(self.postion, line)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getstate__</span><span class="params">(self)</span>:</span>    <span class="comment"># 记录文件被 pickle 时候的状态</span></span><br><span class="line">        state = self.__dict__.copy()    <span class="comment"># 获取被 pickle 时的字典信息</span></span><br><span class="line">        <span class="keyword">del</span> state[<span class="string">"file"</span>]</span><br><span class="line">        <span class="keyword">return</span> state</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setstate__</span><span class="params">(self, state)</span>:</span>    <span class="comment"># 设置反序列化后的状态</span></span><br><span class="line">        self.__dict__.update(state)</span><br><span class="line">        file = open(self.filename)</span><br><span class="line">        self.file = file</span><br><span class="line"></span><br><span class="line">reader = TextReader(<span class="string">"zen.text"</span>)</span><br><span class="line">print(reader.readline())</span><br><span class="line">print(reader.readline())</span><br><span class="line">s = pickle.dumps(reader)    <span class="comment"># 在 dumps 的时候会默认调用 __getstate__</span></span><br><span class="line">new_reader = pickle.loads(s)    <span class="comment"># 在 loads 的时候会默认调用 __setstate__</span></span><br><span class="line">print(new_reader.readline())</span><br></pre></td></tr></table></figure>
</li>
<li><p>能够自动维护对象间的引用，如果一个对象上存在多个引用，pickle 后不会改变对象间的引用，并且能够自动处理循环和递归引用。</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="string">"a"</span>, <span class="string">"b"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a    <span class="comment"># b 引用对象 a</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.append(<span class="string">"c"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = pickle.dumps((a, b))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1, b1 = pickle.loads(p)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1</span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b1</span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a1.append(<span class="string">"d"</span>)    <span class="comment"># 反序列化对 a1 对象的修改仍然会影响到 b1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b1</span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>]</span><br></pre></td></tr></table></figure>
<p>但 pickle 使用也存在以下一些限制：</p>
</li>
<li><strong>pickle 不能保证操作的原子性</strong>。pickle 并不是原子操作，也就是说在一个 pickle 调用中如果发生异常，可能部分数据已经被保存，另外如果对象处于深递归状态，那么可能超出 Python 的最大递归深度。递归深度可以通过 <code>sys.setrecursionlimit()</code> 进行扩展。</li>
<li><strong>pickle 存在安全性问题</strong>。Python 的文档清晰地表明它不提供安全性保证，因此对于一个从不可信的数据源接收到的数据不要轻易进行反序列化。由于 loads() 可以接收字符串作为参数，精心设计的字符串给入侵提供了一种可能。在 Python 解释器中输入代码 <code>pickle.loads(&quot;cos\nsystem\n(S&#39;dir\ntR.&quot;)</code>便可以查看当前目录下所有文件。可以将 dir 替换为其他更具破坏性的命令。如果要进一步提高安全性，用户可以通过继承类 pickle.Unpickler 并重写 <code>find_class()</code> 方法来实现。</li>
<li><strong>pickle 协议是 Python 特定的，不同语言之间的兼容性难以保障</strong>。用 Python 创建的 pickle 文件可能其他语言不能使用。</li>
</ul>
<h2 id="序列化的另一个不错的选择——JSON"><a href="#序列化的另一个不错的选择——JSON" class="headerlink" title="序列化的另一个不错的选择——JSON"></a>序列化的另一个不错的选择——JSON</h2><p>Python 的标准库 JSON 提供的最常用的方法与 pickle 类似，dump/dumps 用来序列化，load/loads 用来反序列化。需要注意 json 默认不支持非 ASCII-based 的编码，如 load 方法可能在处理中文字符时不能正常显示，则需要通过 encoding 参数指定对应的字符编码。在序列化方面，相比 pickle，JSON 具有以下优势：</p>
<ul>
<li>使用简单，<strong>支持多种数据类型</strong>。JSON 文档的构成非常简单，仅存在以下两大数据结构：<ul>
<li><strong>名称/值对的集合</strong>。在各种语言中，它被实现为一个对象、记录、结构、字典、散列表、键列表或关联数组。</li>
<li><strong>值的有序列表</strong>。在大多数语言中，它被实现为数组、向量、列表或序列。在 Python 中对应支持的数据类型包括字典、列表、字符串、整数、浮点数、True、False、None 等。JSON 中数据结构和 Python 中的转换并不是完全一一对应，存在一定的差异。</li>
</ul>
</li>
<li><strong>存储格式可读性更为友好，容易修改</strong>。相比于 pickle 来说，json 格式更加接近程序员的思维，阅读和修改上要容易得多。dumps() 函数提供了一个参数 indent 使生成的 json 文件可读性更好，0 意味着“每个值单独一行”；大于 0 的数字意味着“每个值单独一行并且使用这个数字的空格来缩进嵌套的数据结构”。但需要注意的是，这个参数是以文件大小变大为代价的。</li>
<li><strong>json 支持跨平台跨语言操作</strong>。如 Python 中生成的 json 文件可以轻易使用 JavaScript 解析，互操作性更强，而 pickle 格式的文件只能在 Python 语言中支持。此外 json 原生的 JavaScript 支持，客户端浏览器不需要为此使用额外的解释器，特别适用于 Web 应用提供快速、紧凑、方便地序列化操作。此外，相比于 pickle，json 的存储格式更为紧凑，所占空间更小。</li>
<li><strong>具有较强的扩展性</strong>。json 模块还提供了编码（JSONEncoder）和解码类（JSONDecoder）以便用户对其默认不支持的序列化类型进行扩展。</li>
</ul>
<p>Python 中标准模块 json 的性能比 pickle 与 cPickle 稍逊。如果对序列化性能要求非常高的场景，可以使用 cPickle 模块。</p>
<h2 id="使用-threading-模块编写多线程程序"><a href="#使用-threading-模块编写多线程程序" class="headerlink" title="使用 threading 模块编写多线程程序"></a>使用 threading 模块编写多线程程序</h2><p>GIL 的存在使得 Python 多线程编程暂时无法充分利用多处理器的优势，并不能提高运行速率，但在以下几种情况，如<strong>等待外部资源返回</strong>，或者<strong>为了提高用户体验而建立反应灵活的用户界面</strong>，或者<strong>多用户应用程序</strong>中，多线程仍然是一个比较好的解决方案。</p>
<p>Python 为多线程编程提供了两个非常简单明了的模块：thread 和 threading。</p>
<p>thread 模块提供了多线程底层支持模块，以低级原始的方式来处理和控制线程，使用起来较为复杂；而 threading 模块基于 thread 进行包装，将线程的操作对象化，在语言层面提供了丰富的特性。实际应用中，<strong>推荐优先使用 threading 模块而不是 thread 模块。</strong></p>
<ul>
<li><p>就线程的<strong>同步和互斥</strong>来说，threading 模块中不仅有 Lock 指令锁，RLock 可重入指令锁，还支持条件变量 Condition、信号量 Semaphore、BoundedSemaphore 以及 Event 事件等。</p>
</li>
<li><p><strong>threading 模块主线程和子线程交互友好</strong>，<code>join()</code> 方法能够阻塞当前上下文环境的线程，直到调用此方法的线程终止或到达指定的 timeout（可选参数）。利用该方法可以方便地控制主线程和子线程以及子线程之间的执行。</p>
</li>
</ul>
<p>实际上很多情况下我们可能希望主线程能够等待所有子线程都完成时才退出，这时使用 threading 模块守护线程，可以通过 setDaemon() 函数来设定线程的 daemon 属性。当 daemon 属性设置为 True 的时候表明主线程的退出可以不用等待子线程完成。默认情况下，daemon 标志为 False，所有的非守护线程结束后主线程才会结束。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc</span><span class="params">(a, delay)</span>:</span></span><br><span class="line">    print(<span class="string">"I will calculate square of &#123;&#125; after delay for &#123;&#125;"</span>.format(a, delay))</span><br><span class="line">    time.sleep(delay)</span><br><span class="line">    print(<span class="string">"calculate begins..."</span>)</span><br><span class="line">    result = a * a</span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=myfunc, args=(<span class="number">2</span>, <span class="number">5</span>))</span><br><span class="line">t2 = threading.Thread(target=myfunc, args=(<span class="number">6</span>, <span class="number">8</span>))</span><br><span class="line">print(t1.isDaemon())</span><br><span class="line">print(t2.isDaemon())</span><br><span class="line">t2.setDaemon(<span class="literal">True</span>)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br></pre></td></tr></table></figure>
<h2 id="使用-Queue-使多线程编程更安全"><a href="#使用-Queue-使多线程编程更安全" class="headerlink" title="使用 Queue 使多线程编程更安全"></a>使用 Queue 使多线程编程更安全</h2><p>多线程编程不是件容易的事情。线程间的同步和互斥，线程间数据的共享等这些都是涉及线程安全要考虑的问题。</p>
<p>Python 中的 Queue 模块提供了 3 种队列：</p>
<ul>
<li><p><code>Queue.Queue(maxsize)</code>：<strong>先进先出</strong>，maxsize 为队列大小，其值为非正数的时候为无限循环队列</p>
</li>
<li><p><code>Queue.LifoQueue(maxsize)</code>：<strong>后进先出，相当于栈</strong></p>
</li>
<li><p><code>Queue.PriorityQueue(maxsize)</code>：<strong>优先级队列</strong></p>
</li>
</ul>
<p>这 3 种队列支持以下方法：</p>
<ul>
<li><code>Queue.qsize()</code>：返回队列大小。</li>
<li><code>Queue.empty()</code>：队列为空的时候返回 True，否则返回 False</li>
<li><code>Queue.full()</code>：当设定了队列大小的情况下，如果队列满则返回 True，否则返回 False。</li>
<li><code>Queue.put(item[, block[, timeout]])</code>：往队列中添加元素 item，block 设置为 False 的时候，如果队列满则抛出 Full 异常。如果 block 设置为 True，timeout 为 None 的时候则会一直等待直到有空位置，否则会根据 timeout 的设定超时后抛出 Full 异常。</li>
<li><code>Queue.put_nowait(item)</code>：等于 <code>put(item, False).block</code> 设置为 False 的时候，如果队列空则抛出 Empty 异常。如果 block 设置为 True、timeout 为 None 的时候则会一直等到有元素可用，否则会根据 timeout 的设定超时后抛出 Empty 异常。</li>
<li><code>Queue.get([block[, timeout]])</code>：从队列中删除元素并返回该元素的值</li>
<li><code>Queue.get_nowait()</code>：等价于 <code>get(False)</code></li>
<li><code>Queue.task_done()</code>：发送信号表明入列任务已经完成，经常在消费者线程中用到</li>
<li><code>Queue.join()</code>：阻塞直至队列中所有的元素处理完毕</li>
</ul>
<p>Queue 模块是<strong>线程安全</strong>的。需要注意的是， Queue 模块中的队列和 collections.deque 所表示的队列并不一样，前者主要用于不同线程之间的通信，它内部实现了线程的锁机制；而后者主要是数据结构上的概念。</p>
<p>多线程下载的例子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DownloadThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, queue)</span>:</span></span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.queue = queue</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            url = self.queue.get()    <span class="comment"># 从队列中取出一个 url 元素</span></span><br><span class="line">            print(self.name + <span class="string">"begin download"</span> + url + <span class="string">"..."</span>)</span><br><span class="line">            self.download_file(url)    <span class="comment"># 进行文件下载</span></span><br><span class="line">            self.queue.task_done()    <span class="comment"># 下载完毕发送信号</span></span><br><span class="line">            print(self.name + <span class="string">" download completed!!!"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">download_file</span><span class="params">(self, url)</span>:</span>    <span class="comment"># 下载文件</span></span><br><span class="line">        urlhandler = urllib2.urlopen(url)</span><br><span class="line">        fname = os.path.basename(url) + <span class="string">".html"</span>    <span class="comment"># 文件名称</span></span><br><span class="line">        <span class="keyword">with</span> open(fname, <span class="string">"wb"</span>) <span class="keyword">as</span> f:    <span class="comment"># 打开文件</span></span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                chunk = urlhandler.read(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> chunk:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                f.write(chunk)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    urls = [<span class="string">"https://www.createspace.com/3611970"</span>,<span class="string">"http://wiki.python.org/moni.WebProgramming"</span>]</span><br><span class="line">    queue = Queue.Queue()</span><br><span class="line">    <span class="comment"># create a thread pool and give them a queue</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        t = DownloadThread(queue)    <span class="comment"># 启动 5 个线程同时进行下载</span></span><br><span class="line">        t.setDaemon(<span class="literal">True</span>)</span><br><span class="line">        t.start()</span><br><span class="line">​</span><br><span class="line">    <span class="comment"># give the queue some data</span></span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        queue.put(url)</span><br><span class="line">​</span><br><span class="line">    <span class="comment"># wait for the queue to finish</span></span><br><span class="line">    queue.join()</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://monteyang.cn/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%89%EF%BC%89%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/M.jpeg">
      <meta itemprop="name" content="Monte Yang">
      <meta itemprop="description" content="❤MY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monte's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%89%EF%BC%89%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" class="post-title-link" itemprop="url">编写高质量Python程序（三）基础语法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-14 14:14:55" itemprop="dateCreated datePublished" datetime="2020-04-14T14:14:55+08:00">2020-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-19 08:09:41" itemprop="dateModified" datetime="2020-04-19T08:09:41+08:00">2020-04-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>本系列文章为《编写高质量代码——改善Python程序的91个建议》的精华汇总。<br><!-- > 首发于公众号【Python与算法之路】 --></p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%89%EF%BC%89%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://monteyang.cn/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BC%96%E7%A8%8B%E6%83%AF%E7%94%A8%E6%B3%95.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/M.jpeg">
      <meta itemprop="name" content="Monte Yang">
      <meta itemprop="description" content="❤MY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monte's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BC%96%E7%A8%8B%E6%83%AF%E7%94%A8%E6%B3%95.html" class="post-title-link" itemprop="url">编写高质量Python程序（二）编程惯用法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-10 10:37:25" itemprop="dateCreated datePublished" datetime="2020-04-10T10:37:25+08:00">2020-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-11 21:05:39" itemprop="dateModified" datetime="2020-04-11T21:05:39+08:00">2020-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>本系列文章为《编写高质量代码——改善Python程序的91个建议》的精炼汇总。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BC%96%E7%A8%8B%E6%83%AF%E7%94%A8%E6%B3%95.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://monteyang.cn/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%80%EF%BC%89%E5%BC%95%E8%AE%BA.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/M.jpeg">
      <meta itemprop="name" content="Monte Yang">
      <meta itemprop="description" content="❤MY">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Monte's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%80%EF%BC%89%E5%BC%95%E8%AE%BA.html" class="post-title-link" itemprop="url">编写高质量Python程序（一）引论</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-10 01:45:35" itemprop="dateCreated datePublished" datetime="2020-04-10T01:45:35+08:00">2020-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-22 22:10:54" itemprop="dateModified" datetime="2020-04-22T22:10:54+08:00">2020-04-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>本系列文章为《编写高质量代码——改善Python程序的91个建议》的精华汇总。</p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/%E7%BC%96%E5%86%99%E9%AB%98%E8%B4%A8%E9%87%8FPython%E7%A8%8B%E5%BA%8F%EF%BC%88%E4%B8%80%EF%BC%89%E5%BC%95%E8%AE%BA.html#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Monte Yang" src="/images/M.jpeg">
  <p class="site-author-name" itemprop="name">Monte Yang</p>
  <div class="site-description" itemprop="description">❤MY</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MonteYang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;MonteYang" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:59786677@qq.com" title="E-Mail → mailto:59786677@qq.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="external nofollow noopener noreferrer" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Monte Yang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a> 强力驱动
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://mist.theme-next.org/" class="theme-link" rel="external nofollow noopener noreferrer" target="_blank">NexT.Mist</a>
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        本站访客数：<span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        本站总访问量：<span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout: 3000,
        priority: true,
        ignores: [uri => uri.includes('#'),uri => uri == 'http://monteyang.cn/',]
      });
      });
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
